--
-- PostgreSQL database dump
--

-- Dumped from database version 9.4.0
-- Dumped by pg_dump version 9.4.0
-- Started on 2015-11-02 19:03:19

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

--
-- TOC entry 188 (class 3079 OID 11855)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2096 (class 0 OID 0)
-- Dependencies: 188
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 172 (class 1259 OID 42726)
-- Name: authentication; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE authentication (
    id bigint NOT NULL,
    login text NOT NULL,
    password text NOT NULL,
    user_id integer NOT NULL
);


ALTER TABLE authentication OWNER TO postgres;

--
-- TOC entry 173 (class 1259 OID 42732)
-- Name: authentication_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE authentication_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE authentication_id_seq OWNER TO postgres;

--
-- TOC entry 2097 (class 0 OID 0)
-- Dependencies: 173
-- Name: authentication_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE authentication_id_seq OWNED BY authentication.id;


--
-- TOC entry 174 (class 1259 OID 42734)
-- Name: category; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE category (
    id bigint NOT NULL,
    title text NOT NULL
);


ALTER TABLE category OWNER TO postgres;

--
-- TOC entry 175 (class 1259 OID 42740)
-- Name: categories_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE categories_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE categories_id_seq OWNER TO postgres;

--
-- TOC entry 2098 (class 0 OID 0)
-- Dependencies: 175
-- Name: categories_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE categories_id_seq OWNED BY category.id;


--
-- TOC entry 176 (class 1259 OID 42742)
-- Name: contact; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE contact (
    id bigint NOT NULL,
    e_mail text NOT NULL,
    phone text,
    skype text,
    user_id integer NOT NULL
);


ALTER TABLE contact OWNER TO postgres;

--
-- TOC entry 177 (class 1259 OID 42748)
-- Name: contacts_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE contacts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE contacts_id_seq OWNER TO postgres;

--
-- TOC entry 2099 (class 0 OID 0)
-- Dependencies: 177
-- Name: contacts_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE contacts_id_seq OWNED BY contact.id;


--
-- TOC entry 178 (class 1259 OID 42750)
-- Name: request; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE request (
    id bigint NOT NULL,
    user_from integer NOT NULL,
    user_to integer NOT NULL,
    subject_from integer NOT NULL,
    subject_to integer NOT NULL,
    status integer DEFAULT 0 NOT NULL
);


ALTER TABLE request OWNER TO postgres;

--
-- TOC entry 179 (class 1259 OID 42754)
-- Name: requests_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE requests_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE requests_id_seq OWNER TO postgres;

--
-- TOC entry 2100 (class 0 OID 0)
-- Dependencies: 179
-- Name: requests_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE requests_id_seq OWNED BY request.id;


--
-- TOC entry 187 (class 1259 OID 42845)
-- Name: student; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE student (
    id bigint NOT NULL,
    user_id integer,
    subject_id integer
);


ALTER TABLE student OWNER TO postgres;

--
-- TOC entry 186 (class 1259 OID 42843)
-- Name: students_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE students_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE students_id_seq OWNER TO postgres;

--
-- TOC entry 2101 (class 0 OID 0)
-- Dependencies: 186
-- Name: students_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE students_id_seq OWNED BY student.id;


--
-- TOC entry 180 (class 1259 OID 42756)
-- Name: subject; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE subject (
    id bigint NOT NULL,
    title text NOT NULL,
    category_id integer
);


ALTER TABLE subject OWNER TO postgres;

--
-- TOC entry 181 (class 1259 OID 42762)
-- Name: subjects_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE subjects_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE subjects_id_seq OWNER TO postgres;

--
-- TOC entry 2102 (class 0 OID 0)
-- Dependencies: 181
-- Name: subjects_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE subjects_id_seq OWNED BY subject.id;


--
-- TOC entry 182 (class 1259 OID 42764)
-- Name: teacher; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE teacher (
    id bigint NOT NULL,
    user_id integer NOT NULL,
    subject_id integer NOT NULL
);


ALTER TABLE teacher OWNER TO postgres;

--
-- TOC entry 183 (class 1259 OID 42767)
-- Name: teachers_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE teachers_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE teachers_id_seq OWNER TO postgres;

--
-- TOC entry 2103 (class 0 OID 0)
-- Dependencies: 183
-- Name: teachers_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE teachers_id_seq OWNED BY teacher.id;


--
-- TOC entry 184 (class 1259 OID 42769)
-- Name: users; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE users (
    id bigint NOT NULL,
    first_name text NOT NULL,
    last_name text NOT NULL,
    sex text NOT NULL,
    birth date NOT NULL,
    country text NOT NULL,
    city text NOT NULL,
    summary text,
    photo bytea[]
);


ALTER TABLE users OWNER TO postgres;

--
-- TOC entry 185 (class 1259 OID 42775)
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE users_id_seq OWNER TO postgres;

--
-- TOC entry 2104 (class 0 OID 0)
-- Dependencies: 185
-- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE users_id_seq OWNED BY users.id;


--
-- TOC entry 1928 (class 2604 OID 42777)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY authentication ALTER COLUMN id SET DEFAULT nextval('authentication_id_seq'::regclass);


--
-- TOC entry 1929 (class 2604 OID 42778)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY category ALTER COLUMN id SET DEFAULT nextval('categories_id_seq'::regclass);


--
-- TOC entry 1930 (class 2604 OID 42779)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY contact ALTER COLUMN id SET DEFAULT nextval('contacts_id_seq'::regclass);


--
-- TOC entry 1932 (class 2604 OID 42780)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY request ALTER COLUMN id SET DEFAULT nextval('requests_id_seq'::regclass);


--
-- TOC entry 1936 (class 2604 OID 42848)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY student ALTER COLUMN id SET DEFAULT nextval('students_id_seq'::regclass);


--
-- TOC entry 1933 (class 2604 OID 42781)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY subject ALTER COLUMN id SET DEFAULT nextval('subjects_id_seq'::regclass);


--
-- TOC entry 1934 (class 2604 OID 42782)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY teacher ALTER COLUMN id SET DEFAULT nextval('teachers_id_seq'::regclass);


--
-- TOC entry 1935 (class 2604 OID 42783)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY users ALTER COLUMN id SET DEFAULT nextval('users_id_seq'::regclass);


--
-- TOC entry 2073 (class 0 OID 42726)
-- Dependencies: 172
-- Data for Name: authentication; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY authentication (id, login, password, user_id) FROM stdin;
1	john	123	1
2	peter	123	2
3	mary	123	3
4	izabella	123	4
\.


--
-- TOC entry 2105 (class 0 OID 0)
-- Dependencies: 173
-- Name: authentication_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('authentication_id_seq', 1, false);


--
-- TOC entry 2106 (class 0 OID 0)
-- Dependencies: 175
-- Name: categories_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('categories_id_seq', 1, false);


--
-- TOC entry 2075 (class 0 OID 42734)
-- Dependencies: 174
-- Data for Name: category; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY category (id, title) FROM stdin;
1	Languages
3	Music
2	IT
\.


--
-- TOC entry 2077 (class 0 OID 42742)
-- Dependencies: 176
-- Data for Name: contact; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY contact (id, e_mail, phone, skype, user_id) FROM stdin;
2	peternorth@nomail.ua	0662222222	peter	2
1	johnsons@nomail.ua	0661111111	pushkin	1
3	mary@nomail.ua	0663333333	mary	3
4	izabella@nomail.ua	0664444444	izabella	4
\.


--
-- TOC entry 2107 (class 0 OID 0)
-- Dependencies: 177
-- Name: contacts_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('contacts_id_seq', 1, false);


--
-- TOC entry 2079 (class 0 OID 42750)
-- Dependencies: 178
-- Data for Name: request; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY request (id, user_from, user_to, subject_from, subject_to, status) FROM stdin;
\.


--
-- TOC entry 2108 (class 0 OID 0)
-- Dependencies: 179
-- Name: requests_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('requests_id_seq', 1, false);


--
-- TOC entry 2088 (class 0 OID 42845)
-- Dependencies: 187
-- Data for Name: student; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY student (id, user_id, subject_id) FROM stdin;
1	1	5
3	3	4
4	4	6
2	2	6
\.


--
-- TOC entry 2109 (class 0 OID 0)
-- Dependencies: 186
-- Name: students_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('students_id_seq', 1, false);


--
-- TOC entry 2081 (class 0 OID 42756)
-- Dependencies: 180
-- Data for Name: subject; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY subject (id, title, category_id) FROM stdin;
1	English	1
2	Spanish	1
4	C++	2
6	Balalaika	3
5	Fife	3
3	Assembler	2
\.


--
-- TOC entry 2110 (class 0 OID 0)
-- Dependencies: 181
-- Name: subjects_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('subjects_id_seq', 1, false);


--
-- TOC entry 2083 (class 0 OID 42764)
-- Dependencies: 182
-- Data for Name: teacher; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY teacher (id, user_id, subject_id) FROM stdin;
1	1	2
2	2	3
3	4	3
4	3	3
5	2	1
6	1	3
7	1	6
\.


--
-- TOC entry 2111 (class 0 OID 0)
-- Dependencies: 183
-- Name: teachers_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('teachers_id_seq', 1, false);


--
-- TOC entry 2085 (class 0 OID 42769)
-- Dependencies: 184
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY users (id, first_name, last_name, sex, birth, country, city, summary, photo) FROM stdin;
1	John	Smith	m	1980-01-20	Ukraine	Kiev	\N	\N
2	Peter	North	m	1975-03-15	Ukraine	Kiev	\N	\N
3	Mary	Ivanova	f	1996-06-02	Ukraine	Brovary	\N	\N
4	Izabella	Harris	f	1997-05-31	Ukraine	Chabany	\N	\N
\.


--
-- TOC entry 2112 (class 0 OID 0)
-- Dependencies: 185
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('users_id_seq', 1, false);


--
-- TOC entry 1938 (class 2606 OID 42785)
-- Name: auth_pk; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY authentication
    ADD CONSTRAINT auth_pk PRIMARY KEY (id);


--
-- TOC entry 1940 (class 2606 OID 42787)
-- Name: category_pk; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY category
    ADD CONSTRAINT category_pk PRIMARY KEY (id);


--
-- TOC entry 1942 (class 2606 OID 42789)
-- Name: contacts_pk; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY contact
    ADD CONSTRAINT contacts_pk PRIMARY KEY (id);


--
-- TOC entry 1944 (class 2606 OID 42791)
-- Name: request_pk; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY request
    ADD CONSTRAINT request_pk PRIMARY KEY (id);


--
-- TOC entry 1952 (class 2606 OID 42851)
-- Name: student_pk; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY student
    ADD CONSTRAINT student_pk PRIMARY KEY (id);


--
-- TOC entry 1946 (class 2606 OID 42793)
-- Name: subject_pk; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY subject
    ADD CONSTRAINT subject_pk PRIMARY KEY (id);


--
-- TOC entry 1948 (class 2606 OID 42795)
-- Name: teacher_pk; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY teacher
    ADD CONSTRAINT teacher_pk PRIMARY KEY (id);


--
-- TOC entry 1950 (class 2606 OID 42797)
-- Name: user_id; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY users
    ADD CONSTRAINT user_id PRIMARY KEY (id);


--
-- TOC entry 1959 (class 2606 OID 42798)
-- Name: category; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY subject
    ADD CONSTRAINT category FOREIGN KEY (category_id) REFERENCES category(id) ON DELETE SET NULL;


--
-- TOC entry 1960 (class 2606 OID 42803)
-- Name: subject; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY teacher
    ADD CONSTRAINT subject FOREIGN KEY (subject_id) REFERENCES subject(id);


--
-- TOC entry 1963 (class 2606 OID 42857)
-- Name: subject_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY student
    ADD CONSTRAINT subject_fk FOREIGN KEY (subject_id) REFERENCES subject(id);


--
-- TOC entry 1955 (class 2606 OID 42808)
-- Name: subject_from_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY request
    ADD CONSTRAINT subject_from_id FOREIGN KEY (subject_from) REFERENCES subject(id);


--
-- TOC entry 1956 (class 2606 OID 42813)
-- Name: subject_to_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY request
    ADD CONSTRAINT subject_to_id FOREIGN KEY (subject_to) REFERENCES subject(id);


--
-- TOC entry 1953 (class 2606 OID 42818)
-- Name: user; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY authentication
    ADD CONSTRAINT "user" FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL;


--
-- TOC entry 1954 (class 2606 OID 42823)
-- Name: user; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY contact
    ADD CONSTRAINT "user" FOREIGN KEY (user_id) REFERENCES authentication(id) ON DELETE SET NULL;


--
-- TOC entry 1961 (class 2606 OID 42828)
-- Name: user; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY teacher
    ADD CONSTRAINT "user" FOREIGN KEY (user_id) REFERENCES users(id);


--
-- TOC entry 1962 (class 2606 OID 42852)
-- Name: user_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY student
    ADD CONSTRAINT user_fk FOREIGN KEY (user_id) REFERENCES users(id);


--
-- TOC entry 1957 (class 2606 OID 42833)
-- Name: user_from_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY request
    ADD CONSTRAINT user_from_id FOREIGN KEY (user_from) REFERENCES users(id);


--
-- TOC entry 1958 (class 2606 OID 42838)
-- Name: user_to_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY request
    ADD CONSTRAINT user_to_id FOREIGN KEY (user_to) REFERENCES users(id);


--
-- TOC entry 2095 (class 0 OID 0)
-- Dependencies: 6
-- Name: public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


-- Completed on 2015-11-02 19:03:22

--
-- PostgreSQL database dump complete
--

